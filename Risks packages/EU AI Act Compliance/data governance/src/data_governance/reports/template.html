
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>EU AI Act Conformity Assessment</title>
    <style>
        body { font-family: 'Helvetica', sans-serif; line-height: 1.6; color: #333; }
        .header { text-align: center; border-bottom: 2px solid #003399; padding-bottom: 20px; margin-bottom: 30px; }
        .logo { color: #003399; font-size: 24px; font-weight: bold; }
        h1 { color: #003399; }
        h2 { border-left: 5px solid #ffcc00; padding-left: 10px; margin-top: 30px; }
        .risk-badge { padding: 5px 10px; border-radius: 4px; color: white; font-weight: bold; }
        .risk-HIGH { background-color: #dc3545; }
        .risk-MEDIUM { background-color: #ffc107; color: black; }
        .risk-LOW { background-color: #28a745; }
        table { width: 100%; border-collapse: collapse; margin: 20px 0; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background-color: #f2f2f2; }
        .footer { position: fixed; bottom: 0; width: 100%; text-align: center; font-size: 10px; color: #777; }
    </style>
</head>
<body>
    <div class="header">
        <div class="logo">EU AI Act Compliance Suite</div>
        <h1>Conformity Assessment Report</h1>
        <p><strong>Date:</strong> {{ date }} | <strong>System ID:</strong> {{ system_id }}</p>
    </div>

    <h2>1. Executive Summary</h2>
    <p>This document constitutes a technical conformity assessment for a High-Risk AI System, generated automatically by the Data Governance MCP.</p>
    
    <table class="summary-table">
        <tr>
            <th>Assessment Area</th>
            <th>Status</th>
            <th>Details</th>
        </tr>
        <tr>
            <td>Data Quality</td>
            <td><span class="risk-badge risk-{{ quality_status }}"> {{ quality_status }} </span></td>
            <td>{{ quality_summary }}</td>
        </tr>
        <tr>
            <td>Privacy (GDPR)</td>
            <td><span class="risk-badge risk-{{ privacy_status }}"> {{ privacy_status }} </span></td>
            <td>{{ privacy_summary }}</td>
        </tr>
        <tr>
            <td>Bias & Fairness</td>
            <td><span class="risk-badge risk-{{ bias_status }}"> {{ bias_status }} </span></td>
            <td>{{ bias_summary }}</td>
        </tr>
    </table>

    <h2>2. Detailed Risk Analysis</h2>

    <h3>2.1 Privacy & Data Protection</h3>
    <p><strong>PII Detection Results:</strong></p>
    {% if privacy_risks %}
    <ul>
        {% for risk in privacy_risks %}
        <li><strong>{{ risk.column }}</strong>: Detected {{ risk.type }}</li>
        {% endfor %}
    </ul>
    {% else %}
    <p>No PII detected in the sampled dataset.</p>
    {% endif %}

    <h3>2.2 Bias & Fairness (Article 10)</h3>
    <p><strong>Demographic Parity Analysis:</strong></p>
    <pre>{{ bias_details }}</pre>

    <h2>3. Environmental Impact</h2>
    <p>Estimated Carbon Footprint: <strong>{{ carbon_footprint }} kgCO2</strong></p>

    <h2>4. Declaration of Conformity</h2>
    <p>Based on the automated analysis, this system is:</p>
    <h3>
        {% if overall_status == 'COMPLIANT' %}
        <span style="color: green;">✅ COMPLIANT</span>
        {% else %}
        <span style="color: red;">❌ NON-COMPLIANT</span>
        {% endif %}
    </h3>
    <p><em>(Pending human review and signature)</em></p>

    <div class="footer">
        Generated by Data Governance MCP - {{ date }}
    </div>
</body>
</html>
